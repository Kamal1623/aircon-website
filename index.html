<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Aircon Engineers - Premium AC, Fridge & Washing Machine Services</title>
    <meta name="description" content="Aircon Engineers ‚Äì AC, fridge & washing machine repair services in Rajakilpakkam, Chennai 600073. Call 73050 84847.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ====== original styles (kept unchanged where possible) ====== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root{
            --primary: #0066cc;
            --primary-dark: #004999;
            --text-primary: #1a1a1a;
            --text-secondary: #666;
            --bg-light: #f8f9fa;
            --white: #ffffff;
            --border: #e5e5e5;
            --success: #25D366;
            --whatsapp: #25D366;
            --accent-blue: #e3f2fd;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: var(--text-primary);
            line-height: 1.6;
            background: var(--white);
        }
        .background-icons { position: fixed; top:0; left:0; width:100%; height:100%; overflow:hidden; z-index:0; pointer-events:none; opacity:0.06; }
        .float-icon { position:absolute; font-size:5rem; animation: float 25s infinite ease-in-out; }
        .float-icon:nth-child(1){ top:10%; left:10%; animation-delay:0s; }
        .float-icon:nth-child(2){ top:20%; right:15%; animation-delay:4s; }
        .float-icon:nth-child(3){ bottom:30%; left:20%; animation-delay:8s; }
        .float-icon:nth-child(4){ top:60%; right:10%; animation-delay:12s; }
        .float-icon:nth-child(5){ bottom:15%; right:25%; animation-delay:16s; }
        .float-icon:nth-child(6){ top:40%; left:5%; animation-delay:20s; }
        @keyframes float { 0%,100%{ transform:translateY(0) rotate(0deg);} 25%{ transform:translateY(-40px) rotate(8deg);} 50%{ transform:translateY(-80px) rotate(-8deg);} 75%{ transform:translateY(-40px) rotate(8deg);} }

        header { position: sticky; top:0; background: rgba(255,255,255,0.98); backdrop-filter: blur(10px); border-bottom:1px solid var(--border); z-index:1000; transition:box-shadow .3s; }
        header.scrolled { box-shadow:0 2px 20px rgba(0,0,0,0.08); }
        .header-content { max-width:1200px; margin:0 auto; padding:1.25rem 2rem; display:flex; justify-content:space-between; align-items:center; position:relative; z-index:1; }
        .logo-text { font-size:2rem; font-weight:800; background: linear-gradient(135deg,#0066cc 0%,#00a8ff 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; letter-spacing:-1px; font-family:'Poppins',sans-serif; text-transform:uppercase; position:relative; }
        .logo-text::after { content:''; position:absolute; bottom:-4px; left:0; width:60%; height:3px; background: linear-gradient(90deg,#0066cc,transparent); border-radius:2px; }
        .tagline { font-size:0.75rem; color:var(--text-secondary); margin-top:0.25rem; font-weight:500; letter-spacing:1px; text-transform:uppercase; }
        .header-actions { display:flex; gap:1rem; align-items:center; }
        .btn { padding:0.75rem 1.5rem; border-radius:10px; font-weight:600; font-size:0.9375rem; cursor:pointer; transition:all 0.3s ease; border:none; text-decoration:none; display:inline-block; }
        .btn-outline { background:transparent; border:2px solid var(--primary); color:var(--primary); }
        .btn-outline:hover { background:var(--primary); color:white; transform:translateY(-2px); }
        .btn-primary { background:var(--primary); color:white; box-shadow:0 4px 12px rgba(0,102,204,0.25); }
        .btn-primary:hover { background:var(--primary-dark); transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,102,204,0.35); }

        .hero { max-width:1200px; margin:0 auto; padding:4rem 2rem; text-align:center; position:relative; z-index:1; }
        .hero h1 { font-size:3.25rem; font-weight:800; line-height:1.2; margin-bottom:1rem; letter-spacing:-1.5px; }
        .hero h1 .highlight { background: linear-gradient(135deg,#0066cc 0%,#00a8ff 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
        .hero-subtitle { font-size:1.25rem; color:var(--text-secondary); margin-bottom:3rem; max-width:700px; margin-left:auto; margin-right:auto; font-weight:400; }

        .rating-badge { display:inline-flex; align-items:center; gap:0.75rem; background:var(--accent-blue); padding:1rem 2rem; border-radius:50px; margin:3rem 0; font-weight:600; box-shadow:0 4px 16px rgba(0,102,204,0.15); }
        .stars { color:#ffc107; font-size:1.25rem; }

        .services-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(320px,1fr)); gap:2.5rem; margin:3rem 0; max-width:1200px; margin-left:auto; margin-right:auto; padding:2rem; }
        .service-card { background:white; border:2px solid var(--border); border-radius:20px; overflow:hidden; transition:all .4s ease; cursor:pointer; position:relative; }
        .service-card::before { content:''; position:absolute; top:0; left:0; right:0; bottom:0; background: linear-gradient(135deg, rgba(0,102,204,0.05) 0%, rgba(0,168,255,0.05) 100%); opacity:0; transition:opacity .4s; }
        .service-card:hover { transform:translateY(-12px); box-shadow:0 16px 40px rgba(0,0,0,0.15); border-color:var(--primary); }
        .service-card:hover::before { opacity:1; }
        .service-image-container { width:100%; height:240px; overflow:hidden; position:relative; }
        .service-image-container img { width:100%; height:100%; object-fit:cover; transition:transform .4s ease; }
        .service-card:hover .service-image-container img { transform:scale(1.08); }
        .service-content { padding:2rem; position:relative; }
        .service-title { font-size:1.75rem; font-weight:700; margin-bottom:0.75rem; color:var(--text-primary); }
        .service-description { color:var(--text-secondary); margin-bottom:1.5rem; line-height:1.7; font-size:1rem; }
        .service-btn { width:100%; padding:1rem; background:var(--primary); color:white; border:none; border-radius:10px; font-weight:600; font-size:1rem; cursor:pointer; transition:all .3s; }
        .service-btn:hover { background:var(--primary-dark); transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,102,204,0.3); }

        .reviews-section { max-width:1200px; margin:0 auto; padding:5rem 2rem; position:relative; z-index:1; }
        .section-title { font-size:2.5rem; font-weight:700; text-align:center; margin-bottom:3rem; letter-spacing:-1px; }
        .reviews-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); gap:2rem; }
        .review-card { background:white; padding:2rem; border-radius:16px; border:2px solid var(--border); transition:all .3s; }
        .review-card:hover { border-color:var(--primary); transform:translateY(-5px); box-shadow:0 12px 32px rgba(0,0,0,0.1); }
        .review-stars { color:#ffc107; font-size:1.25rem; margin-bottom:1rem; }
        .review-text { color:var(--text-secondary); line-height:1.7; margin-bottom:1rem; }
        .review-author { font-weight:600; color:var(--text-primary); }

        footer { background:var(--text-primary); color:white; padding:3rem 2rem; position:relative; z-index:1; }
        .footer-content { max-width:1200px; margin:0 auto; text-align:center; }

        /* ====== modal + booking styles (extended) ====== */
        .modal-overlay { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index:2000; display:none; align-items:center; justify-content:center; animation: fadeIn .3s ease; }
        .modal-overlay.active { display:flex; }
        @keyframes fadeIn { from{ opacity:0 } to{ opacity:1 } }
        .modal-content { background:white; border-radius:24px; width:90%; max-width:560px; max-height:85vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.3); animation: slideUp .4s cubic-bezier(0.34, 1.56, 0.64, 1); position:relative; }
        @keyframes slideUp { from{ opacity:0; transform: translateY(50px) scale(0.9)} to{ opacity:1; transform: translateY(0) scale(1)} }
        .modal-header { padding:2rem; border-bottom:2px solid var(--border); position:relative; }
        .modal-header h3 { font-size:1.75rem; font-weight:700; color:var(--text-primary); margin-bottom:0.5rem; }
        .modal-header p { color:var(--text-secondary); font-size:0.9375rem; }
        .close-modal { position:absolute; top:1.5rem; right:1.5rem; background:var(--bg-light); border:none; width:36px; height:36px; border-radius:50%; font-size:1.5rem; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all .3s; color:var(--text-secondary); }
        .close-modal:hover { background:var(--primary); color:white; transform:rotate(90deg); }
        .modal-body { padding:2rem; }
        .service-option { padding:1.25rem; border:2px solid var(--border); border-radius:12px; margin-bottom:1rem; cursor:pointer; transition:all .3s; display:flex; align-items:center; gap:1rem; }
        .service-option:hover { border-color:var(--primary); background:var(--accent-blue); transform:translateX(8px); }
        .service-option.selected { border-color:var(--primary); background: linear-gradient(90deg, rgba(0,102,204,0.06), rgba(0,168,255,0.03)); box-shadow:0 6px 20px rgba(0,102,204,0.08); transform:translateX(4px); }
        .service-option-icon { font-size:2rem; min-width:50px; text-align:center; }
        .service-option-text { flex:1; }
        .service-option-title { font-weight:600; font-size:1.125rem; margin-bottom:0.25rem; }
        .service-option-price { color:var(--text-secondary); font-size:0.9375rem; }

        .booking-step { display:none; }
        .booking-step.active { display:block; animation: slideUp 0.4s ease; }
        .form-group { margin-bottom:1.5rem; }
        .form-group label { display:block; margin-bottom:0.75rem; font-weight:600; color:var(--text-primary); font-size:1rem; }
        .form-group input, .form-group select, .form-group textarea { width:100%; padding:1rem; border:2px solid var(--border); border-radius:12px; font-size:1rem; font-family:inherit; transition:all .3s; background:white; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline:none; border-color:var(--primary); box-shadow:0 0 0 4px rgba(0,102,204,0.1); }

        .location-btn { width:100%; padding:1rem; background:var(--bg-light); border:2px dashed var(--border); border-radius:12px; font-size:1rem; font-weight:600; cursor:pointer; transition:all .3s; display:flex; align-items:center; justify-content:center; gap:0.5rem; color:var(--text-primary); }
        .location-btn:hover { border-color:var(--primary); background:var(--accent-blue); }
        .location-btn.success { background:#d4edda; border-color:#28a745; color:#155724; }

        .modal-footer { padding:1.5rem 2rem; border-top:2px solid var(--border); display:flex; gap:1rem; }
        .btn-secondary { flex:1; padding:1rem; background:var(--bg-light); border:none; border-radius:10px; font-weight:600; cursor:pointer; transition:all .3s; }
        .btn-secondary:hover { background:var(--border); }
        .btn-next { flex:2; padding:1rem; background:var(--primary); color:white; border:none; border-radius:10px; font-weight:600; font-size:1rem; cursor:pointer; transition:all .3s; }
        .btn-next:hover { background:var(--primary-dark); transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,102,204,0.3); }
        .btn-next:disabled { background:#ccc; cursor:not-allowed; transform:none; }

        /* WhatsApp Float */
        .whatsapp-float { position:fixed; bottom:2rem; right:2rem; width:64px; height:64px; background:var(--whatsapp); border-radius:50%; display:flex; align-items:center; justify-content:center; box-shadow:0 6px 24px rgba(37,211,102,0.4); cursor:pointer; z-index:1500; text-decoration:none; animation:pulse 2s infinite; }
        .whatsapp-float:hover { transform:scale(1.1); box-shadow:0 8px 32px rgba(37,211,102,0.5); }
        .whatsapp-float svg { width:36px; height:36px; fill:white; }
        @keyframes pulse { 0%,100%{ box-shadow:0 6px 24px rgba(37,211,102,0.4);} 50%{ box-shadow:0 6px 24px rgba(37,211,102,0.6), 0 0 0 12px rgba(37,211,102,0.1);} }

        /* whatsapp mini popup (service chooser) */
        .wa-popup { position:fixed; bottom:6.25rem; right:2.25rem; width:260px; background:white; border-radius:14px; box-shadow:0 12px 40px rgba(0,0,0,0.18); z-index:1600; display:none; overflow:hidden; font-size:0.95rem; }
        .wa-popup.active { display:block; }
        .wa-popup-header { padding:0.75rem 1rem; display:flex; align-items:center; gap:0.5rem; border-bottom:1px solid var(--border); background:linear-gradient(90deg, rgba(0,102,204,0.06), rgba(0,168,255,0.03)); }
        .wa-popup-body { padding:0.75rem 0.75rem 1rem 0.75rem; display:flex; flex-direction:column; gap:0.5rem; }
        .wa-service-btn { background:transparent; border:2px solid var(--border); padding:0.6rem 0.75rem; border-radius:10px; display:flex; gap:0.5rem; align-items:center; cursor:pointer; }
        .wa-service-btn:hover { border-color:var(--primary); background:var(--accent-blue); transform:translateX(4px); }

        /* small helper texts */
        .muted { color:var(--text-secondary); font-size:0.95rem; }

        @media (max-width:768px){
            .logo-text { font-size:1.5rem; }
            .hero h1 { font-size:2.25rem; }
            .header-content { flex-direction:column; gap:1rem; }
            .services-grid { grid-template-columns:1fr; }
            .modal-content { width:95%; margin:1rem; }
            .whatsapp-float { width:56px; height:56px; bottom:1.5rem; right:1.5rem; }
            .whatsapp-float svg { width:32px; height:32px; }
            .wa-popup { right:1.5rem; bottom:5.75rem; width:92%; max-width:320px; }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="background-icons">
        <div class="float-icon">‚ùÑÔ∏è</div>
        <div class="float-icon">üßä</div>
        <div class="float-icon">üåÄ</div>
        <div class="float-icon">‚ùÑÔ∏è</div>
        <div class="float-icon">üßä</div>
        <div class="float-icon">üåÄ</div>
    </div>

    <!-- Header -->
    <header id="header">
        <div class="header-content">
            <div>
                <div class="logo-text">Aircon Engineers</div>
                <div class="tagline">Expert Appliance Solutions</div>
            </div>
            <div class="header-actions">
                <a href="tel:+917305084847" class="btn btn-outline">üìû Call Now</a>
                <a href="#services" class="btn btn-primary" onclick="openServiceModal('AC')">Book Service</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>Professional <span class="highlight">Appliance Services</span><br>at Your Doorstep</h1>
        <p class="hero-subtitle">Expert repair and maintenance for AC, Refrigerator & Washing Machine in Rajakilpakkam, Chennai</p>

        <div class="rating-badge">
            <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
            <span><strong>5.0</strong> Rating ‚Ä¢ 20 Google Reviews</span>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services-grid" id="services">
        <div class="service-card" onclick="openServiceModal('AC')">
            <div class="service-image-container">
                <img src="https://frequip.com/wp-content/uploads/2025/02/Which-Gas-is-Used-in-AC-1.jpg" alt="Air Conditioner Service">
            </div>
            <div class="service-content">
                <h3 class="service-title">Air Conditioner</h3>
                <p class="service-description">Professional AC repair, servicing, installation and gas refilling services</p>
                <button class="service-btn" onclick="openServiceModal('AC')">Book AC Service ‚Üí</button>
            </div>
        </div>

        <div class="service-card" onclick="openServiceModal('Fridge')">
            <div class="service-image-container">
                <img src="https://5.imimg.com/data5/SELLER/Default/2025/8/539438126/HD/YE/VV/15180118/refrigerator-repairing-service-500x500.jpg" alt="Refrigerator Service">
            </div>
            <div class="service-content">
                <h3 class="service-title">Refrigerator</h3>
                <p class="service-description">Expert fridge repair for cooling issues, leakage, and compressor problems</p>
                <button class="service-btn" onclick="openServiceModal('Fridge')">Book Fridge Service ‚Üí</button>
            </div>
        </div>

        <div class="service-card" onclick="openServiceModal('Washing Machine')">
            <div class="service-image-container">
                <img src="https://5.imimg.com/data5/SELLER/Default/2024/8/443720850/QL/GI/KR/143334200/washing-machine-repair-services.jpg" alt="Washing Machine Service">
            </div>
            <div class="service-content">
                <h3 class="service-title">Washing Machine</h3>
                <p class="service-description">Complete washing machine repair and installation services</p>
                <button class="service-btn" onclick="openServiceModal('Washing Machine')">Book WM Service ‚Üí</button>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section class="reviews-section">
        <h2 class="section-title">What Our Customers Say</h2>
        <div class="reviews-grid">
            <div class="review-card">
                <div class="review-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p class="review-text">"Good AC service, good customer service & on-time service. Very professional team!"</p>
                <div class="review-author">‚Äî Ranjan Sekar</div>
            </div>
            <div class="review-card">
                <div class="review-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p class="review-text">"Talented professionals. Completed the service on time. Highly recommended!"</p>
                <div class="review-author">‚Äî Prabha M</div>
            </div>
            <div class="review-card">
                <div class="review-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p class="review-text">"Very good service and good work. They fixed my fridge quickly."</p>
                <div class="review-author">‚Äî JS CoolTech</div>
            </div>
            <div class="review-card">
                <div class="review-stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                <p class="review-text">"Excellent service. Perfect workmanship. My washing machine works like new!"</p>
                <div class="review-author">‚Äî Kamal L</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p style="font-size:1.125rem; margin-bottom:1rem;">¬© 2024 Aircon Engineers</p>
            <p>üìç No.3, 4th St, PTC Colony, Sembakkam, Rajakilpakkam, Chennai - 600073</p>
            <p style="margin-top:0.5rem;">üìû Call: 73050 84847 | ‚≠ê Google Rating: 5.0 (20 reviews)</p>
        </div>
    </footer>

    <!-- Booking Modal -->
    <div class="modal-overlay" id="bookingModal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <div class="modal-header">
                <h3 id="modalTitle">Select Service</h3>
                <p id="modalSubtitle">Choose what you need</p>
                <button class="close-modal" onclick="closeModal()" aria-label="Close modal">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Step 1: Service Selection -->
                <div class="booking-step active" id="step1">
                    <!-- dynamic service options will be injected here -->
                </div>

                <!-- Step 2: Customer Name -->
                <div class="booking-step" id="step2">
                    <div class="form-group">
                        <label>üë§ Your Name</label>
                        <input type="text" id="customerName" placeholder="Enter your full name" />
                    </div>
                </div>

                <!-- Step 3: Phone Number -->
                <div class="booking-step" id="step3">
                    <div class="form-group">
                        <label>üìû Phone Number</label>
                        <input type="tel" id="customerPhone" placeholder="Enter 10-digit mobile number" maxlength="10" />
                    </div>
                </div>

                <!-- Step 4: Location -->
                <div class="booking-step" id="step4">
                    <div class="form-group">
                        <label>üìç Service Location</label>
                        <button class="location-btn" id="locationBtn" onclick="getLocation()">
                            <span id="locationText">üìç Share Current Location</span>
                        </button>
                        <p style="margin-top:1rem; color:var(--text-secondary); font-size:0.875rem; text-align:center;">
                            Or enter manually:
                        </p>
                        <textarea id="manualAddress" rows="3" placeholder="Enter your complete address" style="width:100%; padding:1rem; border:2px solid var(--border); border-radius:12px; margin-top:0.5rem; font-family:inherit;"></textarea>
                    </div>
                </div>

                <!-- Step 5: Date & Time -->
                <div class="booking-step" id="step5">
                    <div class="form-group">
                        <label>üìÖ Preferred Date</label>
                        <input type="date" id="serviceDate" />
                    </div>
                    <div class="form-group">
                        <label>üïê Preferred Time</label>
                        <input type="time" id="serviceTime" />
                    </div>
                    <p class="muted">We'll try to match your preferred slot. Technician will confirm via call.</p>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-secondary" id="backBtn" onclick="previousStep()" style="display:none;">‚Üê Back</button>
                <button class="btn-next" id="nextBtn" onclick="nextStep()">Next ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- WhatsApp Floating (main bubble) -->
    <div class="whatsapp-float" id="whatsappFloat" title="Chat on WhatsApp">
        <!-- whatsapp svg -->
        <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20.52 3.48A11.86 11.86 0 0 0 12 .5 11.9 11.9 0 0 0 .5 12c0 2.1.55 4.06 1.6 5.82L0 24l6.84-1.77A11.9 11.9 0 0 0 12 23.5c6.6 0 11.98-5.36 11.98-11.98 0-3.2-1.25-6.2-3.46-8.04zM12 21.5c-1.14 0-2.26-.18-3.29-.53l-.24-.08L4 21l1.18-4.39-.08-.27A8.48 8.48 0 0 1 3.5 12 8.5 8.5 0 1 1 12 21.5zm4.98-7.1c-.27-.14-1.6-.79-1.85-.88-.25-.09-.43-.14-.61.14-.17.27-.67.88-.83 1.06-.15.17-.3.19-.57.07-.27-.12-1.14-.42-2.18-1.34-.81-.72-1.36-1.61-1.52-1.88-.16-.27-.02-.42.12-.56.13-.13.27-.32.41-.48.14-.16.18-.27.27-.45.09-.18.04-.34-.02-.48-.06-.14-.61-1.47-.84-2.02-.22-.53-.45-.46-.61-.47-.16-.01-.35-.01-.54-.01s-.48.07-.73.34c-.25.27-.97.95-.97 2.31 0 1.36.99 2.67 1.13 2.85.14.18 1.95 2.98 4.72 4.18 3.27 1.44 3.27 0.97 3.86 0.9.59-.07 1.92-.78 2.19-1.53.27-.76.27-1.41.19-1.54-.08-.13-.25-.19-.52-.33z"></path>
        </svg>
    </div>

    <!-- WhatsApp popup (choose service quick messages) -->
    <div class="wa-popup" id="waPopup" role="menu" aria-hidden="true">
        <div class="wa-popup-header">
            <strong>Quick Book</strong>
            <div style="flex:1"></div>
            <span class="muted" style="font-size:0.85rem;">Hi Mani</span>
        </div>
        <div class="wa-popup-body">
            <button class="wa-service-btn" onclick="openWhatsAppQuick('AC')">üì∂ AC Service</button>
            <button class="wa-service-btn" onclick="openWhatsAppQuick('Washing Machine')">üß∫ Washing Machine</button>
            <button class="wa-service-btn" onclick="openWhatsAppQuick('Fridge')">üßä Fridge</button>
            <div style="height:6px"></div>
            <button class="wa-service-btn" onclick="openWhatsAppQuick('General Enquiry')">üí¨ General Enquiry</button>
        </div>
    </div>

    <script>
        /********* Data: service types (all options requested) *********/
        const SERVICE_TYPES = {
            "AC": [
                { key: "AC General Service", subtitle: "Routine check & basic maintenance" },
                { key: "AC Deep Cleaning", subtitle: "Indoor + outdoor unit deep clean" },
                { key: "AC Installation", subtitle: "New unit installation" },
                { key: "AC Uninstallation", subtitle: "Remove & pack old unit" },
                { key: "AC Gas Refill", subtitle: "Gas top-up / recharge" },
                { key: "AC Water Leakage Fix", subtitle: "Fix leaking / drainage issues" },
                { key: "AC Not Cooling", subtitle: "Diagnosis & repair for cooling issue" }
            ],
            "Fridge": [
                { key: "No cooling", subtitle: "Fridge not cooling properly" },
                { key: "Gas refill", subtitle: "Refrigerant top-up" },
                { key: "Compressor issue", subtitle: "Compressor diagnosis/repair" },
                { key: "Door not closing", subtitle: "Seal or hinge fix" },
                { key: "Water leakage", subtitle: "Fix water leakage or drain" },
                { key: "Fridge not switching on", subtitle: "Electrical fault check" }
            ],
            "Washing Machine": [
                { key: "Not spinning", subtitle: "Drum not spinning or intermittent" },
                { key: "Not draining", subtitle: "Drain pump or pipe issue" },
                { key: "Water leakage", subtitle: "Fix inlet/outlet leakage" },
                { key: "Drum issue", subtitle: "Bearing / drum problems" },
                { key: "Noise issue", subtitle: "Excessive noise diagnosis" },
                { key: "Machine not turning on", subtitle: "Electrical / board issue" },
                { key: "Installation / Uninstallation", subtitle: "New install or remove old unit" }
            ]
        };

        // persistent variables
        let selectedService = null;     // "AC" | "Fridge" | "Washing Machine"
        let selectedServiceType = null; // specific option key
        let currentStep = 1;            // 1..5

        // DOM references
        const bookingModal = document.getElementById('bookingModal');
        const stepEls = {
            1: document.getElementById('step1'),
            2: document.getElementById('step2'),
            3: document.getElementById('step3'),
            4: document.getElementById('step4'),
            5: document.getElementById('step5')
        };
        const modalTitle = document.getElementById('modalTitle');
        const modalSubtitle = document.getElementById('modalSubtitle');
        const nextBtn = document.getElementById('nextBtn');
        const backBtn = document.getElementById('backBtn');

        // form fields
        const nameInput = document.getElementById('customerName');
        const phoneInput = document.getElementById('customerPhone');
        const manualAddress = document.getElementById('manualAddress');
        const locationBtn = document.getElementById('locationBtn');
        const locationText = document.getElementById('locationText');
        const dateInput = document.getElementById('serviceDate');
        const timeInput = document.getElementById('serviceTime');

        // open modal and initialize options
        function openServiceModal(service) {
            selectedService = service;
            selectedServiceType = null;
            currentStep = 1;

            modalTitle.textContent = service + " Service";
            modalSubtitle.textContent = "Choose the specific " + (service === 'AC' ? 'AC' : service === 'Fridge' ? 'fridge' : 'washing machine') + " service you need";
            renderServiceOptions(service);
            showStep(1);
            bookingModal.classList.add('active');
            bookingModal.setAttribute('aria-hidden','false');

            // reset fields
            nameInput.value = '';
            phoneInput.value = '';
            manualAddress.value = '';
            locationText.textContent = 'üìç Share Current Location';
            dateInput.value = '';
            timeInput.value = '';
        }

        function closeModal() {
            bookingModal.classList.remove('active');
            bookingModal.setAttribute('aria-hidden','true');
        }

        // render step1 options
        function renderServiceOptions(service) {
            const container = stepEls[1];
            container.innerHTML = ''; // clear
            const types = SERVICE_TYPES[service] || [];
            types.forEach((opt, idx) => {
                const div = document.createElement('div');
                div.className = 'service-option';
                div.setAttribute('data-key', opt.key);
                div.innerHTML = `
                    <div class="service-option-icon">üîß</div>
                    <div class="service-option-text">
                        <div class="service-option-title">${opt.key}</div>
                        <div class="service-option-price">${opt.subtitle}</div>
                    </div>
                `;
                div.addEventListener('click', () => {
                    // mark selection
                    Array.from(container.children).forEach(ch => ch.classList.remove('selected'));
                    div.classList.add('selected');
                    selectedServiceType = opt.key;
                    // automatically advance to next step after a short delay
                    setTimeout(() => { nextStep(); }, 220);
                });
                container.appendChild(div);
            });

            // also add small note
            const note = document.createElement('p');
            note.className = 'muted';
            note.style.marginTop = '0.5rem';
            note.textContent = 'Tap an option to select and continue.';
            container.appendChild(note);
        }

        // navigation logic
        function showStep(step) {
            Object.keys(stepEls).forEach(k => {
                stepEls[k].classList.remove('active');
            });
            stepEls[step].classList.add('active');
            currentStep = step;

            // back button visibility
            backBtn.style.display = (step === 1) ? 'none' : 'inline-block';

            // next button label and enable state
            if (step < 5) {
                nextBtn.textContent = 'Next ‚Üí';
                nextBtn.disabled = false;
            } else {
                nextBtn.textContent = 'Confirm & WhatsApp';
                nextBtn.disabled = false;
            }
        }

        function nextStep() {
            // validations before moving forward
            if (currentStep === 1) {
                if (!selectedServiceType) {
                    alert('Please select a service type to continue.');
                    return;
                }
                showStep(2);
                return;
            }
            if (currentStep === 2) {
                const nm = nameInput.value.trim();
                if (!nm) { alert('Please enter your name.'); return; }
                showStep(3);
                return;
            }
            if (currentStep === 3) {
                const ph = phoneInput.value.trim();
                if (!/^\d{10}$/.test(ph)) { alert('Please enter a valid 10-digit mobile number.'); return; }
                showStep(4);
                return;
            }
            if (currentStep === 4) {
                const manual = manualAddress.value.trim();
                const locText = locationText.getAttribute('data-loc') || '';
                if (!manual && !locText) { alert('Please share your location or enter address manually.'); return; }
                showStep(5);
                return;
            }
            if (currentStep === 5) {
                const date = dateInput.value;
                const time = timeInput.value;
                if (!date || !time) {
                    if (!confirm('No date/time selected. Do you want to proceed without preferred slot?')) {
                        return;
                    }
                }
                // prepare final message and open whatsapp
                sendBookingToWhatsApp();
                closeModal();
                return;
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        // location retrieval
        function getLocation() {
            if (!navigator.geolocation) {
                alert('Geolocation is not supported by your browser.');
                return;
            }
            locationBtn.disabled = true;
            locationText.textContent = '‚è≥ Getting location...';
            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    const lat = pos.coords.latitude.toFixed(6);
                    const lon = pos.coords.longitude.toFixed(6);
                    const locationUrl = `https://www.google.com/maps/search/?api=1&query=${lat},${lon}`;
                    // set the manual address area to the map link but keep it editable
                    manualAddress.value = `My location: ${locationUrl}`;
                    locationText.textContent = '‚úÖ Location shared';
                    locationText.setAttribute('data-loc', locationUrl);
                    locationBtn.classList.add('success');
                    locationBtn.disabled = false;
                },
                (err) => {
                    locationBtn.disabled = false;
                    locationText.textContent = '‚ö†Ô∏è Unable to get location';
                    alert('Could not get location. Please allow location access or enter address manually.');
                },
                { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
            );
        }

        // build final message and open WhatsApp
        function sendBookingToWhatsApp() {
            const ownerPhone = '917305084847'; // international format without +
            const service = selectedService || '';
            const serviceType = selectedServiceType || '';
            const name = nameInput.value.trim() || '-';
            const phone = phoneInput.value.trim() || '-';
            const address = manualAddress.value.trim() || (locationText.getAttribute('data-loc') || '-');
            const date = dateInput.value || '-';
            const time = timeInput.value || '-';

            const message = `Hi Mani, I want to book ${service} service - ${serviceType}.\n\nName: ${name}\nPhone: ${phone}\nAddress: ${address}\nPreferred Date: ${date}\nPreferred Time: ${time}\n\nPlease confirm.`;

            const encoded = encodeURIComponent(message);
            const url = `https://wa.me/${ownerPhone}?text=${encoded}`;

            // open in new tab
            window.open(url, '_blank');
        }

        /********* WhatsApp floating quick actions *********/
        const whatsappFloat = document.getElementById('whatsappFloat');
        const waPopup = document.getElementById('waPopup');

        whatsappFloat.addEventListener('click', (e) => {
            // toggle popup
            waPopup.classList.toggle('active');
        });

        // quick open with service-specific message
        function openWhatsAppQuick(serviceName) {
            const ownerPhone = '917305084847';
            const message = `Hi Mani, I want to book ${serviceName} service. Please call me to confirm.`;
            const url = `https://wa.me/${ownerPhone}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
            waPopup.classList.remove('active');
        }

        // keyboard: Esc closes modal and wa popup
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
                waPopup.classList.remove('active');
            }
        });

        // close modal when clicking outside content
        bookingModal.addEventListener('click', (e) => {
            if (e.target === bookingModal) closeModal();
        });

        // small accessibility: trap focus? (simple)
        // Ensure clicking any service-card button doesn't propagate and cause double open
        document.querySelectorAll('.service-btn').forEach(b => {
            b.addEventListener('click', (ev) => {
                ev.stopPropagation();
            });
        });

        // keep header shadow on scroll (original)
        const header = document.getElementById('header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 20) header.classList.add('scrolled'); else header.classList.remove('scrolled');
        });

        // when modal opens, ensure first focus
        const observer = new MutationObserver(m => {
            if (bookingModal.classList.contains('active')) {
                setTimeout(() => {
                    // try to focus first interactive element
                    const first = bookingModal.querySelector('.service-option, input, button');
                    if (first) first.focus();
                }, 200);
            }
        });
        observer.observe(bookingModal, { attributes: true, attributeFilter: ['class'] });

    </script>
</body>
</html>
